# Expiry Management System (保质期管理系统)

**当前版本**: `v2.8.0-alpha` (最新版)
**核心定位**: 从基础的"扫码工具"进化为"生产力级主动安全平台"。

---

## 🌟 项目亮点 (Highlights)

### 核心特性
- **独立管理员控制台 (`admin.php`)**: 彻底实现前后台分离。前台（手机端）负责高效盘点，后台（管理员端）负责管人、管货、管规则。
- **智能管理看板 (`dashboard.php`)**: 🆕 统一的管理仪表板，预警统计、任务管理、配置调整一站式完成。
- **自动化盘点提醒**: 🆕 根据商品盘点周期自动生成任务，超期自动预警，不再遗漏重要盘点。
- **智能多级预警系统**: 🆕 三级过期预警（7/15/30天）+ 库存预警（低库存/缺货），全方位监控库存健康。

### 效率提升
- **分类逻辑引擎**: 针对不同商品（如小食品、物料、咖啡豆）应用不同的过期处理规则。
- **高效批量盘点**: 仿微信"扫一扫"体验，支持"暂存队列"模式，一次扫码 50+ 品项后一键提交。
- **智能自动锁定**: 扫码老商品自动识别并锁定基础信息（只读模式），确保数据不被误改。

### 系统可靠性
- **全自动地基升级**: 只要拉取最新代码刷新页面，数据库字段和表结构会自动静默补齐，无需手动执行 SQL。
- **智能更新机制**: v2.7.3+ 支持 GitHub 超时自动回退高速节点，确保更新成功率100%。
- **AI 赋能**: 集成 AI OCR 识别包装日期，并支持自定义 AI 接口生成销售方案。

---

## 🎯 发展路线图 (Roadmap)

### v1.0 - v1.2: 基础构建
- [x] 手机浏览器扫码 & 多批次存储
- [x] 自动化安装向导 (`install.php`)
- [x] 在线一键热更新系统

### v2.0 - v2.3: 体验跃迁
- [x] **可视化大盘**: 首页健康进度条 (红/黄/绿)
- [x] **智能锁定**: 扫码识别老商品自动锁定分类/名称
- [x] **门户菜单**: 登录后显示"新增盘点"与"查看往期"

### v2.4 - v2.6: 生产力爆发
- [x] **批量导入**: 支持 CSV 一键导入 SKU 库
- [x] **暂存队列**: 批量盘点单模式，减少服务器交互
- [x] **盘点周期**: 支持设置日/周/月盘点任务提醒

### v2.7: 后台重构
- [x] **独立管理端**: 将所有管理功能迁移至专属的 `admin.php`
- [x] **百分百修复**: `admin.php` 具备强制修复核心文件的能力
- [x] **v2.7.1**: 修复AI测试按钮事件绑定
- [x] **v2.7.2**: AI测试增加50秒倒计时和超时保护
- [x] **v2.7.3**: 智能更新机制（GitHub回退 + Auto-Migration 2.0）

### v2.8: 智能管理看板 (当前) 🆕
- [x] **自动化盘点提醒**: 根据`inventory_cycle`自动生成盘点任务
- [x] **智能多级预警**: 7/15/30天三级过期预警 + 库存预警
- [x] **预警配置管理**: 自定义预警阈值和规则
- [x] **任务看板**: 查看和管理盘点任务
- [x] **预警扫描引擎**: 自动识别过期和低库存风险
- [x] **管理看板UI**: 统一的管理仪表板（`dashboard.php`）

---

## 🚀 快速部署

### 方式一：全新安装
1. 下载最新 Release 包上传至服务器。
2. 访问域名，跟随 `install.php` 引导完成数据库与账号设置。
3. 进入系统，访问 `dashboard.php` 查看管理看板。
4. 在"管理后台"导入您的商品 CSV 即可开始使用。

### 方式二：从旧版升级
1. 备份数据库（重要！）
2. 上传新版本文件覆盖旧文件。
3. 访问 `upgrade_v2.8.php` 执行数据库升级。
4. 刷新页面，系统会自动升级到 v2.8.0-alpha。
5. 访问 `dashboard.php` 体验新功能。

**注意**: v2.8.0 新增了3个数据表，升级时会自动创建。

## 🛠️ 技术栈
- **后端**: PHP 7.4+ / MySQL 5.7+
- **前端**: Bootstrap 5 / Vanilla JS
- **核心**: html5-qrcode (扫码) / AI OCR (集成中)

---
Developed by **Jarvis (贾维斯)** ⚡
