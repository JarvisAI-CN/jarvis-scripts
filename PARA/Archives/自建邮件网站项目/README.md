# 自建邮件网站项目 (mail.dhmip.cn)

**创建时间**: 2026-02-10
**状态**: 🛑 已取消 (2026-02-11)
**优先级**: ⭐⭐⭐⭐⭐

---

## 项目概述

本项目旨在建立一个完整的、自托管的 Web 邮件系统。
- **域名**: mail.dhmip.cn
- **技术栈**: PHP 8.3 + MariaDB + Postfix + Dovecot + Nginx
- **Web 根目录**: `/var/www/html/mail`
- **备注**: 根据主人指令取消。

---

## 1. 截止日期跟结果描述

### 时间线
- **开始日期**: 2026-02-04
- **阶段 4 完成**: 2026-02-10 (计划)
- **截止日期**: 2026-02-15

### 交付成果
- [x] 成果1: [[基础 Web 界面框架]] ✅ 2026-02-10
- [ ] 成果2: [[SMTP/IMAP 真实集成]] 🔄 进行中
- [ ] 成果3: [[SSL/TLS 安全加固]] ⏳ 待开始

### 成功标准
- [x] 域名 mail.dhmip.cn 可访问
- [x] 可以注册新用户并登录
- [ ] 可以向外部邮箱（Gmail/Outlook）发送邮件
- [ ] 可以接收外部邮件
- [ ] SSL 评级达到 A

---

## 2. 项目任务

### 任务列表
- [x] [[项目任务/环境搭建]] - 状态: ✅ | 完成: 2026-02-06
- [x] [[项目任务/数据库设计]] - 状态: ✅ | 完成: 2026-02-06
- [x] [[项目任务/Web界面开发]] - 状态: ✅ | 完成: 2026-02-10
- [ ] [[项目任务/SMTP认证修复]] - 状态: ⚠️ 阻塞 | 阻塞: 需要主人重新生成 Gmail 应用密码（当前密码失效，Outlook 已禁用 Basic Auth）
- [ ] [[项目任务/IMAP读取实现]] - 状态: ⏳ | 截止: 2026-02-11
- [ ] [[项目任务/SSL证书配置]] - 状态: ⏳ | 截止: 2026-02-12

---

## 3. 项目闪念

### 💡 想法记录
- [[项目闪念/SMTP中继选择]] - 2026-02-10: 考虑到 VPS 封锁 25 端口，必须使用 587 端口的中继。目前 Gmail/Outlook 存在 Basic Auth 限制，考虑使用 API 服务（如 SendGrid/Resend）或配置 OAuth2。
- [[项目闪念/诊断结果]] - 2026-02-10 11:05:
  - ✅ Gmail SMTP 连接成功，但认证失败（应用密码无效）
  - ❌ Outlook SMTP 已禁用 Basic Auth
  - 🔧 需要：主人登录 Google Account 重新生成应用密码
  - 💡 临时方案：使用本地 Postfix（仅本地投递），等待外部 SMTP 配置

### 📝 灵感来源
- 来自: [[Zettelkasten/自建邮件网站项目-技术方案]]
- 灵感: 使用 PHPMailer 的 OAuth2 功能解决微软/谷歌的认证问题。

---

## 4. 这个项目的文件

### 脚本文件 (在 /var/www/html/mail)
- `compose.php` - 写邮件逻辑
- `inbox.php` - 收件箱显示
- `includes/mailer.php` - 核心发送函数
- `test_relay_cli.php` - SMTP 中继测试脚本

### 文档文件 (在本项目目录)
- `Zettelkasten/自建邮件网站项目-环境检查.md`
- `Zettelkasten/自建邮件网站项目-配置完成.md`

---

## 🔗 相关链接

- **所属领域**: [[PARA/Areas/网络服务管理]]
- **相关资源**: [[PARA/Resources/邮件协议标准]]

---

## 📊 进度追踪

### 完成度
- 总任务: 6个
- 已完成: 3个
- 进行中: 1个
- 完成率: 50%

### 最近更新
- 2026-02-10: 项目从 Zettelkasten 迁移至 PARA/Projects 标准结构，更新 SMTP 阻塞状态。

---

## 🎓 经验教训

### 做得好的
- 使用 PHPMailer 简化了 SMTP 交互。
- 界面采用响应式设计，适配手机。

### 需要改进
- 早期没有考虑到大厂对 Basic Auth 的封锁。
- **改进方案**: 下一步研究 PHPMailer OAuth2 示例。

---

**最后更新**: 2026-02-10 06:10
