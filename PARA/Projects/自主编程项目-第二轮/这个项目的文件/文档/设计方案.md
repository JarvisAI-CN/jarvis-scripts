# è‡ªä¸»ç¼–ç¨‹ç³»ç»Ÿ v2.0 è®¾è®¡æ–¹æ¡ˆ

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¶é—´**: 2026-02-13
**è´Ÿè´£äºº**: GLM-4.7
**ç›®æ ‡**: æ„å»ºè‡ªä¸»å¼€å‘ä¸è¿ç»´ç³»ç»Ÿï¼Œå®ç°è‡ªæ„ˆã€è‡ªé©±ç¼–ç ã€å¤šä»“åŒæ­¥

---

## 1. é¡¹ç›®èƒŒæ™¯ä¸ç°çŠ¶åˆ†æ

### 1.1 å½“å‰ç³»ç»Ÿèƒ½åŠ›
- âœ… `auto_maintain.sh`: åŸºç¡€å¥åº·æ£€æŸ¥ + TODOæ›´æ–° + GitåŒæ­¥
- âœ… `api_health_monitor_v2.py`: å¤šæ¨¡å‹å®¹é”™ç›‘æ§ + è‡ªåŠ¨é‡å¯Gateway
- âœ… `update_todo.py`: TODO.mdè‡ªåŠ¨æ›´æ–°
- âœ… 123ç›˜è‡ªåŠ¨å¤‡ä»½ç³»ç»Ÿ
- âœ… å¿ƒè·³ç›‘å¬ä¸å“åº”

### 1.2 å±€é™æ€§åˆ†æ
- âŒ **è¢«åŠ¨æ‰§è¡Œ**: ä¾èµ–cronå®šæ—¶è§¦å‘ï¼Œæ— äº‹ä»¶é©±åŠ¨
- âŒ **å•ä¸€ä¿®å¤ç­–ç•¥**: APIå¼‚å¸¸ä»…é‡å¯Gatewayï¼Œæ— æ¸è¿›å¼ä¿®å¤
- âŒ **æ— è‡ªä¸»ç¼–ç **: éœ€è¦æ‰‹åŠ¨é¢†ä»»åŠ¡ï¼Œæ— æ³•è‡ªåŠ¨æ‰§è¡Œå¼€å‘å·¥ä½œ
- âŒ **ç›‘æ§ç›²åŒº**: WebDAVã€VNCã€å®å¡”é¢æ¿ç­‰å…³é”®æœåŠ¡æœªè¦†ç›–
- âŒ **çº¿æ€§å¤„ç†**: æ— æ³•å¹¶å‘å¤„ç†å¤šä¸ªä»»åŠ¡

---

## 2. ç³»ç»Ÿæ¶æ„è®¾è®¡ (GLM-5 å¢å¼ºç‰ˆ)

### 2.1 æ ¸å¿ƒæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         è‡ªä¸»ç¼–ç¨‹æ§åˆ¶å™¨ v2.0 (Autonomous Controller)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ä»»åŠ¡è°ƒåº¦å™¨ (Task Scheduler)                           â”‚  â”‚
â”‚  â”‚  - äº‹ä»¶é©±åŠ¨ + å®šæ—¶è§¦å‘                                 â”‚  â”‚
â”‚  â”‚  - ä¼˜å…ˆçº§é˜Ÿåˆ—ç®¡ç†                                      â”‚  â”‚
â”‚  â”‚  - ä»»åŠ¡ä¾èµ–å›¾åˆ†æ                                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ä»»åŠ¡ç®¡ç†å™¨ (Task Manager) â­ NEW                   â”‚  â”‚
â”‚  â”‚  - task_list.json ç»´æŠ¤                               â”‚  â”‚
â”‚  â”‚  - ä»»åŠ¡çŠ¶æ€è¿½è¸ª (pending/in-progress/done/failed)    â”‚  â”‚
â”‚  â”‚  - ä»»åŠ¡æ—¥å¿—è®°å½•                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è‡ªæ„ˆå¼•æ“ (Self-Healing Engine)                       â”‚  â”‚
â”‚  â”‚  - æ•…éšœæ£€æµ‹å™¨ (Detector)                              â”‚  â”‚
â”‚  â”‚  - è¯Šæ–­åˆ†æå™¨ (Analyzer)                              â”‚  â”‚
â”‚  â”‚  - ä¿®å¤æ‰§è¡Œå™¨ (Fixer)                                 â”‚  â”‚
â”‚  â”‚  - éªŒè¯å™¨ (Validator)                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  è‡ªä¸»ç¼–ç æ¨¡å— (Autonomous Coding)                     â”‚  â”‚
â”‚  â”‚  - TODO.md è§£æå™¨ â†’ task_list.json è½¬æ¢ â­ NEW     â”‚  â”‚
â”‚  â”‚  - å­ä»»åŠ¡ç”Ÿæˆå™¨ (Subtask Generator)                  â”‚  â”‚
â”‚  â”‚  - ä»£ç ç”Ÿæˆå™¨ (Code Generator using GLM-4.7â†’5)      â”‚  â”‚
â”‚  â”‚  - ç«¯åˆ°ç«¯éªŒè¯å™¨ (E2E Verifier) â­ NEW               â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Git æ“ä½œå™¨ (Git Operator) â­ NEW                   â”‚  â”‚
â”‚  â”‚  - æ¯ä»»åŠ¡è‡ªåŠ¨æäº¤ (Commit-per-task)                 â”‚  â”‚
â”‚  â”‚  - ç²¾ç¡®å›æ»šæ”¯æŒ                                      â”‚  â”‚
â”‚  â”‚  - åˆ†æ”¯ç®¡ç†                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ä¸Šä¸‹æ–‡ç®¡ç†å™¨ (Context Manager) â­ NEW              â”‚  â”‚
â”‚  â”‚  - é•¿ä¼šè¯ä¸Šä¸‹æ–‡å‹ç¼©                                   â”‚  â”‚
â”‚  â”‚  - å®šæœŸåˆ·æ–°/é‡ç½®                                      â”‚  â”‚
â”‚  â”‚  - å…³é”®ä¿¡æ¯ä¿ç•™                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  çŸ¥è¯†åº“ (Knowledge Base)                             â”‚  â”‚
â”‚  â”‚  - æ•…éšœæ¨¡å¼åº“ (Failure Patterns)                     â”‚  â”‚
â”‚  â”‚  - ä¿®å¤æ–¹æ¡ˆåº“ (Fix Strategies)                       â”‚  â”‚
â”‚  â”‚  - ä»£ç æ¨¡æ¿åº“ (Code Templates)                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“                    â†“                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Git åŒæ­¥     â”‚    â”‚ é€šçŸ¥ç³»ç»Ÿ     â”‚    â”‚ æ—¥å¿—ç³»ç»Ÿ     â”‚
â”‚ (æ¯ä»»åŠ¡) â­   â”‚    â”‚              â”‚    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®æµè®¾è®¡ (GLM-5 å¢å¼ºç‰ˆ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    è‡ªä¸»ç¼–ç¨‹ä¸»å¾ªç¯                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ äº‹ä»¶è§¦å‘/   â”‚ â†’  â”‚ TODO.md      â”‚ â†’  â”‚ task_list.   â”‚
â”‚ å®šæ—¶ä»»åŠ¡     â”‚    â”‚ è§£æ          â”‚    â”‚ json (NEW)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â†“
                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                        â”‚ ä»»åŠ¡çŠ¶æ€è¿½è¸ª   â”‚
                                        â”‚ (pending/     â”‚
                                        â”‚  in-progress/ â”‚
                                        â”‚  done/failed) â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ä»»åŠ¡æ‰§è¡Œå¾ªç¯ (GLM-5 é£æ ¼)                 â”‚
â”‚  1. ä» task_list.json å–å‡ºä»»åŠ¡                         â”‚
â”‚  2. æ‰§è¡Œä»»åŠ¡ (è‡ªæ„ˆ/ç¼–ç /ç»´æŠ¤)                          â”‚
â”‚  3. ç«¯åˆ°ç«¯éªŒè¯ (E2E Testing) â­ NEW                   â”‚
â”‚  4. æ›´æ–° task_list.json çŠ¶æ€                           â”‚
â”‚  5. Git æäº¤ (commit-per-task) â­ NEW                  â”‚
â”‚  6. å†™å…¥ progress_flow.log â­ NEW                     â”‚
â”‚  7. ä¸Šä¸‹æ–‡ç®¡ç† (å®šæœŸå‹ç¼©) â­ NEW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â†“                    â†“                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Git åŒæ­¥     â”‚    â”‚ é€šçŸ¥ç³»ç»Ÿ     â”‚    â”‚ è¿›åº¦æ—¥å¿—     â”‚
â”‚ (æ¯ä»»åŠ¡) â­   â”‚    â”‚              â”‚    â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 GLM-5 æ ¸å¿ƒç‰¹æ€§è¯¦è§£ â­ NEW

#### 2.3.1 task_list.json ç»“æ„åŒ–ä»»åŠ¡ç®¡ç†

**è®¾è®¡ç†å¿µ**: ä»"äººç±»å¯è¯»çš„ TODO.md"åˆ°"æœºå™¨å¯æ‰§è¡Œçš„ task_list.json"

```json
{
  "version": "2.0",
  "last_updated": "2026-02-13T16:56:00+08:00",
  "statistics": {
    "total": 10,
    "pending": 3,
    "in_progress": 1,
    "done": 5,
    "failed": 1
  },
  "tasks": [
    {
      "id": "TASK-2026-02-13-001",
      "title": "å®ç° WebDAV è‡ªåŠ¨ä¿®å¤",
      "description": "ä¿®å¤ 123 ç›˜ WebDAV æŒ‚è½½åæ— æ³•å†™å…¥çš„é—®é¢˜",
      "source": "PARA/Projects/123ç›˜è‡ªåŠ¨å¤‡ä»½ç³»ç»Ÿ/README.md",
      "type": "bugfix",
      "priority": "high",
      "status": "in_progress",
      "created_at": "2026-02-13T14:30:00+08:00",
      "started_at": "2026-02-13T16:00:00+08:00",
      "assigned_to": "GLM-4.7",
      "subtasks": [
        {
          "id": "SUBTASK-001",
          "title": "è¯Šæ–­ WebDAV æƒé™é—®é¢˜",
          "status": "done",
          "completed_at": "2026-02-13T16:15:00+08:00",
          "git_commit": "a1b2c3d"
        },
        {
          "id": "SUBTASK-002",
          "title": "å®ç°æ¸è¿›å¼ä¿®å¤é€»è¾‘",
          "status": "in_progress"
        }
      ],
      "logs": [
        {
          "timestamp": "2026-02-13T16:00:00+08:00",
          "level": "INFO",
          "message": "å¼€å§‹æ‰§è¡Œä»»åŠ¡"
        },
        {
          "timestamp": "2026-02-13T16:15:00+08:00",
          "level": "SUCCESS",
          "message": "å­ä»»åŠ¡ SUBTASK-001 å®Œæˆï¼Œæäº¤ a1b2c3d"
        }
      ]
    }
  ]
}
```

**ä¼˜åŠ¿**:
- âœ… **æœºå™¨å¯è§£æ**: ç›´æ¥ç”± Python è¯»å–å’Œå¤„ç†
- âœ… **çŠ¶æ€å¯è¿½è¸ª**: ç²¾ç¡®è®°å½•ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸ
- âœ… **å¯å›æ»š**: æ¯ä¸ª subtask å…³è” git commit
- âœ… **å¯æ¢å¤**: ç³»ç»Ÿé‡å¯åå¯æ¢å¤æ‰§è¡Œ
- âœ… **äººç±»å¯è¯»**: JSON æ ¼å¼æ˜“äºå®¡æŸ¥

#### 2.3.2 progress_flow.log æ‰§è¡Œæ—¥å¿—

**è®¾è®¡ç†å¿µ**: ä¸“é—¨ç”¨äºæ¨¡å—é—´é€šä¿¡çš„æ‰§è¡Œæ—¥å¿—

```
[2026-02-13 16:56:23.456] [TASK-MANAGER] [INFO] Task TASK-2026-02-13-001 started
[2026-02-13 16:56:24.123] [CODING-MODULE] [INFO] Generating code for WebDAV fix...
[2026-02-13 16:56:30.789] [CODING-MODULE] [SUCCESS] Code generated in 6.6s
[2026-02-13 16:56:31.234] [GIT-OPERATOR] [INFO] Committing changes...
[2026-02-13 16:56:32.567] [GIT-OPERATOR] [SUCCESS] Commit a1b2c3d: "fix(WebDAV): implement progressive repair logic"
[2026-02-13 16:56:33.890] [E2E-VERIFIER] [INFO] Running end-to-end tests...
[2026-02-13 16:56:40.123] [E2E-VERIFIER] [SUCCESS] All tests passed
[2026-02-13 16:56:41.456] [TASK-MANAGER] [INFO] Task TASK-2026-02-13-001 completed successfully
```

**æ ¼å¼è¯´æ˜**:
- **æ—¶é—´æˆ³**: ç²¾ç¡®åˆ°æ¯«ç§’
- **æ¨¡å—å**: TASK-MANAGER / CODING-MODULE / GIT-OPERATOR / E2E-VERIFIER
- **çº§åˆ«**: INFO / SUCCESS / WARNING / ERROR
- **æ¶ˆæ¯**: ç®€æ´æè¿°

**ç”¨é€”**:
- å®æ—¶è¿›åº¦è¿½è¸ª
- è°ƒè¯•å’Œå®¡è®¡
- æ¨¡å—é—´åè°ƒ
- æ€§èƒ½åˆ†æ

#### 2.3.3 Commit-per-Task ç²¾ç¡®å›æ»š

**è®¾è®¡ç†å¿µ**: æ¯ä¸ªåŸå­æ“ä½œéƒ½æœ‰ç‹¬ç«‹çš„ Git æäº¤

**æäº¤ç²’åº¦**:
```bash
# ç¤ºä¾‹ï¼šWebDAV ä¿®å¤ä»»åŠ¡çš„æäº¤å†å²
a1b2c3d - 2026-02-13 16:56:32 - fix(WebDAV): implement progressive repair logic
b2c3d4e - 2026-02-13 16:56:20 - feat(WebDAV): add remount strategy
c3d4e5f - 2026-02-13 16:56:10 - chore(WebDAV): diagnose permission issue
```

**å›æ»šç­–ç•¥**:
```python
# å¦‚æœå­ä»»åŠ¡å¤±è´¥ï¼Œç²¾ç¡®å›æ»šåˆ°è¯¥å­ä»»åŠ¡ä¹‹å‰
def rollback_to_subtask(task_id, subtask_id):
    task = get_task(task_id)
    subtask = get_subtask(task, subtask_id)
    
    # å›æ»šåˆ°è¯¥ subtask ä¹‹å‰çš„æäº¤
    git_reset(subtask.git_commit, hard=True)
    
    # æ ‡è®°ä»»åŠ¡ä¸ºå¤±è´¥
    task.status = "failed"
    save_task_list()
```

**ä¼˜åŠ¿**:
- âœ… **ç²¾ç¡®å®šä½**: æ¯ä¸ª subtask éƒ½æœ‰ commit
- âœ… **å¿«é€Ÿå›æ»š**: åªéœ€ `git reset <commit>`
- âœ… **å¢é‡å¼**: å¯ä»¥é€æ­¥æ¨è¿›ï¼Œéšæ—¶å›æ»š
- âœ… **å¯è¿½æº¯**: Git log æä¾›å®Œæ•´å®¡è®¡

#### 2.3.4 ä¸Šä¸‹æ–‡ç®¡ç† (Context Manager)

**è®¾è®¡ç†å¿µ**: é•¿æ—¶é—´è¿è¡Œçš„è‡ªä¸»ç³»ç»Ÿéœ€è¦å®šæœŸåˆ·æ–°ä¸Šä¸‹æ–‡

**è§¦å‘æ¡ä»¶**:
- æ¯å®Œæˆ 5 ä¸ªä»»åŠ¡
- æ¯è¿è¡Œ 30 åˆ†é’Ÿ
- æ£€æµ‹åˆ°ä¸Šä¸‹æ–‡è¿‡å¤§ (>100k tokens)

**å‹ç¼©ç­–ç•¥**:
```python
def compress_context(full_context):
    """å‹ç¼©ä¸Šä¸‹æ–‡ï¼Œä¿ç•™å…³é”®ä¿¡æ¯"""
    compressed = {
        "timestamp": datetime.now().isoformat(),
        "session_summary": summarize_session(full_context),
        "key_decisions": extract_key_decisions(full_context),
        "important_tasks": list_important_tasks(full_context),
        "lessons_learned": extract_lessons(full_context)
    }
    return compressed
```

**ä¿ç•™å†…å®¹**:
- ä»»åŠ¡çŠ¶æ€æ‘˜è¦
- å…³é”®å†³ç­–ç‚¹
- å¤±è´¥æ•™è®­
- æˆåŠŸæ¨¡å¼
- ç³»ç»Ÿé…ç½®å˜åŒ–

**åˆ·æ–°æ—¶æœº**:
```python
if should_flush_context():
    compressed = compress_context(current_context)
    save_compressed_context(compressed)
    reset_to_clean_state()
    load_compressed_context(compressed)
```

#### 2.3.5 ç«¯åˆ°ç«¯éªŒè¯ (End-to-End Testing)

**è®¾è®¡ç†å¿µ**: ç³»ç»Ÿåº”è¯¥èƒ½éªŒè¯è‡ªå·±çš„å·¥ä½œ

**éªŒè¯å±‚çº§**:

**Level 1: è¯­æ³•éªŒè¯**
```python
def verify_syntax(code):
    """éªŒè¯ä»£ç è¯­æ³•"""
    try:
        compile(code, '<string>', 'exec')
        return True, "è¯­æ³•æ­£ç¡®"
    except SyntaxError as e:
        return False, f"è¯­æ³•é”™è¯¯: {e}"
```

**Level 2: åŠŸèƒ½éªŒè¯**
```python
def verify_functionality(script_path, test_cases):
    """éªŒè¯è„šæœ¬åŠŸèƒ½"""
    import subprocess
    
    for test in test_cases:
        result = subprocess.run(
            [script_path, test['args']],
            capture_output=True,
            timeout=30
        )
        
        if result.returncode != test['expected_return']:
            return False, f"æµ‹è¯•å¤±è´¥: {test['name']}"
    
    return True, "æ‰€æœ‰æµ‹è¯•é€šè¿‡"
```

**Level 3: é›†æˆéªŒè¯**
```python
def verify_integration(task):
    """éªŒè¯ä»»åŠ¡å®Œæˆåçš„ç³»ç»ŸçŠ¶æ€"""
    # è¿è¡Œå¥åº·æ£€æŸ¥
    health_results = run_health_checks()
    
    # éªŒè¯ç‰¹å®šåŠŸèƒ½
    if task['type'] == 'bugfix':
        # éªŒè¯ Bug å·²ä¿®å¤
        if check_bug_fixed(task):
            return True, "Bug å·²ä¿®å¤"
    
    return False, "éªŒè¯å¤±è´¥"
```

**Level 4: è‡ªæˆ‘éªŒè¯**
```python
def verify_self():
    """ç³»ç»Ÿè‡ªæˆ‘éªŒè¯"""
    # æ£€æŸ¥è‡ªèº«æ–‡ä»¶å®Œæ•´æ€§
    # éªŒè¯æ¨¡å—åŠ è½½
    # æµ‹è¯•æ—¥å¿—å†™å…¥
    # æ£€æŸ¥ Git åŒæ­¥
    pass
```

---

## 3. æ ¸å¿ƒæ¨¡å—è¯¦ç»†è®¾è®¡

### 3.1 è‡ªæ„ˆå¼•æ“ (Self-Healing Engine)

#### 3.1.1 ç›‘æ§èŒƒå›´æ‰©å±•

| ç›‘æ§å¯¹è±¡ | æ£€æµ‹é¡¹ | ä¸¥é‡çº§åˆ« | ä¿®å¤ç­–ç•¥ |
|---------|--------|---------|---------|
| **OpenClaw Gateway** | è¿›ç¨‹å­˜æ´»ã€ç«¯å£ç›‘å¬ | ğŸ”´ ä¸¥é‡ | é‡å¯æœåŠ¡ â†’ é‡æ–°å®‰è£… â†’ å‘Šè­¦ |
| **APIä¾›åº”å•†** | è®¤è¯çŠ¶æ€ã€é¢åº¦å‰©ä½™ | ğŸŸ  è­¦å‘Š | åˆ·æ–°è®¤è¯ â†’ åˆ‡æ¢ä¾›åº”å•† â†’ å‘Šè­¦ |
| **123ç›˜WebDAV** | æŒ‚è½½çŠ¶æ€ã€è¯»å†™æµ‹è¯• | ğŸŸ  è­¦å‘Š | é‡æ–°æŒ‚è½½ â†’ é‡å¯davfs2 â†’ ä¿®å¤é…ç½® |
| **VNCæœåŠ¡** | ç«¯å£ç›‘å¬ã€è®¤è¯æµ‹è¯• | ğŸŸ¡ æç¤º | é‡å¯vncserver â†’ é‡æ–°é…ç½® |
| **å®å¡”é¢æ¿** | Webè®¿é—®ã€APIå“åº” | ğŸŸ¡ æç¤º | é‡å¯btæœåŠ¡ â†’ æ£€æŸ¥ç«¯å£ |
| **ç£ç›˜ç©ºé—´** | ä½¿ç”¨ç‡>85% | ğŸŸ  è­¦å‘Š | æ¸…ç†æ—¥å¿— â†’ æ¸…ç†ç¼“å­˜ â†’ æ‰©å®¹ |
| **Gitä»“åº“** | æ¨é€å¤±è´¥ã€å†²çª | ğŸŸ¡ æç¤º | å¼ºåˆ¶æ¨é€ â†’ æ‰‹åŠ¨è§£å†³ |
| **GitHubè¿æ¥** | SSH/HTTPSå¯ç”¨æ€§ | ğŸŸ  è­¦å‘Š | åˆ‡æ¢åè®® â†’ æ£€æŸ¥å¯†é’¥ |

#### 3.1.2 æ•…éšœæ£€æµ‹å™¨ (Detector)

```python
class Detector:
    """å¤šç»´æ•…éšœæ£€æµ‹å™¨"""
    
    def __init__(self):
        self.checks = {
            'gateway': self.check_gateway,
            'webdav': self.check_webdav,
            'api': self.check_api_health,
            'disk': self.check_disk_space,
            'vnc': self.check_vnc,
            'bt_panel': self.check_bt_panel,
            'git_sync': self.check_git_sync,
            'github': self.check_github_connectivity
        }
    
    def detect_all(self) -> Dict[str, CheckResult]:
        """æ‰§è¡Œæ‰€æœ‰æ£€æµ‹ï¼Œè¿”å›æ£€æµ‹ç»“æœ"""
        results = {}
        for name, check_func in self.checks.items():
            try:
                results[name] = check_func()
            except Exception as e:
                results[name] = CheckResult(
                    status='error',
                    message=str(e),
                    severity='low'
                )
        return results
```

#### 3.1.3 è¯Šæ–­åˆ†æå™¨ (Analyzer)

```python
class Analyzer:
    """æ•…éšœè¯Šæ–­åˆ†æå™¨"""
    
    def __init__(self, knowledge_base):
        self.kb = knowledge_base
        self.pattern_matcher = PatternMatcher()
    
    def analyze(self, detection_results: Dict) -> Diagnosis:
        """åˆ†ææ£€æµ‹ç»“æœï¼Œç”Ÿæˆè¯Šæ–­æŠ¥å‘Š"""
        
        # 1. æ¨¡å¼åŒ¹é…
        patterns = self.pattern_matcher.match(detection_results)
        
        # 2. å…³è”åˆ†æ
        related_issues = self.find_correlations(detection_results)
        
        # 3. æ ¹å› æ¨æ–­
        root_cause = self.infer_root_cause(patterns, related_issues)
        
        # 4. ç”Ÿæˆä¿®å¤æ–¹æ¡ˆ
        fix_strategies = self.generate_fix_strategies(root_cause)
        
        return Diagnosis(
            root_cause=root_cause,
            related_issues=related_issues,
            fix_strategies=fix_strategies,
            confidence=self.calc_confidence(patterns)
        )
```

#### 3.1.4 ä¿®å¤æ‰§è¡Œå™¨ (Fixer)

```python
class Fixer:
    """è‡ªåŠ¨ä¿®å¤æ‰§è¡Œå™¨"""
    
    def __init__(self):
        self.fix_handlers = {
            'restart_service': self.restart_service,
            'remount_webdav': self.remount_webdav,
            'refresh_api_auth': self.refresh_api_auth,
            'switch_provider': self.switch_provider,
            'clean_disk': self.clean_disk_space,
            'fix_git': self.fix_git_issues,
            'redeploy': self.redeploy_service
        }
    
    def execute(self, diagnosis: Diagnosis) -> FixResult:
        """æ‰§è¡Œä¿®å¤ç­–ç•¥ï¼ˆæ¸è¿›å¼ï¼‰"""
        
        for strategy in diagnosis.fix_strategies:
            try:
                result = self.fix_handlers[strategy['type']](strategy['params'])
                
                if result.success:
                    self.log_fix_success(strategy)
                    return result
                else:
                    self.log_fix_failure(strategy, result.error)
                    # ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªç­–ç•¥
                    
            except Exception as e:
                self.log_fix_error(strategy, e)
                continue
        
        return FixResult(success=False, error="æ‰€æœ‰ä¿®å¤ç­–ç•¥å‡å¤±è´¥")
```

#### 3.1.5 ä¿®å¤ç­–ç•¥ç¤ºä¾‹

**WebDAVæŒ‚è½½å¤±è´¥**
```
ç­–ç•¥1: é‡æ–°æŒ‚è½½
  â†’ mount -a
  â†’ éªŒè¯è¯»å†™
  
ç­–ç•¥2: é‡å¯davfs2æœåŠ¡
  â†’ systemctl restart davfs2
  â†’ sleep 5
  â†’ mount -a
  
ç­–ç•¥3: ä¿®å¤é…ç½®æ–‡ä»¶
  â†’ æ£€æŸ¥ /etc/fstab
  â†’ æµ‹è¯•å‡­è¯
  â†’ æ›´æ–° secrets
  â†’ é‡æ–°æŒ‚è½½
  
ç­–ç•¥4: å‘Šè­¦äººå·¥ä»‹å…¥
  â†’ å‘é€é£ä¹¦é€šçŸ¥
  â†’ è®°å½•åˆ°æ—¥å¿—
```

**APIè®¤è¯è¿‡æœŸ**
```
ç­–ç•¥1: åˆ·æ–°è®¤è¯
  â†’ openclaw models refresh google-antigravity
  
ç­–ç•¥2: åˆ‡æ¢å¤‡ç”¨ä¾›åº”å•†
  â†’ åˆ‡æ¢åˆ° zhipu/GLM-4.7
  â†’ æ›´æ–°é»˜è®¤æ¨¡å‹é…ç½®
  
ç­–ç•¥3: é‡å¯Gateway
  â†’ openclaw gateway restart
  â†’ ç­‰å¾…60ç§’
  â†’ éªŒè¯æœåŠ¡çŠ¶æ€
```

---

### 3.2 è‡ªä¸»ç¼–ç æ¨¡å— (Autonomous Coding)

#### 3.2.1 TODO.md è§£æå™¨

```python
class Todoparser:
    """TODO.mdè§£æå™¨ï¼Œæ”¯æŒMarkdownæ ¼å¼"""
    
    def parse(self, todo_path: str) -> List[Task]:
        """è§£æTODO.mdï¼Œæå–ä»»åŠ¡"""
        
        tasks = []
        current_quadrant = None
        
        with open(todo_path, 'r', encoding='utf-8') as f:
            lines = f.readlines()
        
        for line in lines:
            # è§£æè±¡é™
            if line.startswith('## ğŸ”´ ç¬¬ä¸€è±¡é™'):
                current_quadrant = 'urgent_important'
            elif line.startswith('## ğŸŸ  ç¬¬äºŒè±¡é™'):
                current_quadrant = 'urgent_not_important'
            # ...
            
            # è§£æä»»åŠ¡
            task_match = re.match(r'- \[(x| )\] \*\*(.+?)\*\*', line)
            if task_match:
                task = Task(
                    completed=task_match.group(1) == 'x',
                    title=task_match.group(2),
                    quadrant=current_quadrant,
                    metadata=self.extract_metadata(line)
                )
                tasks.append(task)
        
        return tasks
```

#### 3.2.2 å­ä»»åŠ¡ç”Ÿæˆå™¨

```python
class SubtaskGenerator:
    """å°†å¤§ä»»åŠ¡åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„å­ä»»åŠ¡"""
    
    def __init__(self):
        self.templates = {
            'å¼€å‘åŠŸèƒ½': [
                'éœ€æ±‚åˆ†æ',
                'æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡',
                'ä»£ç å®ç°',
                'å•å…ƒæµ‹è¯•',
                'é›†æˆæµ‹è¯•',
                'æ–‡æ¡£æ›´æ–°'
            ],
            'ä¿®å¤Bug': [
                'é—®é¢˜å¤ç°',
                'å®šä½æ ¹å› ',
                'è®¾è®¡ä¿®å¤æ–¹æ¡ˆ',
                'å®æ–½ä¿®å¤',
                'å›å½’æµ‹è¯•',
                'æ›´æ–°æµ‹è¯•ç”¨ä¾‹'
            ],
            'ä¼˜åŒ–é‡æ„': [
                'æ€§èƒ½åˆ†æ',
                'ç“¶é¢ˆè¯†åˆ«',
                'é‡æ„æ–¹æ¡ˆ',
                'ä»£ç ä¿®æ”¹',
                'æ€§èƒ½éªŒè¯',
                'æ–‡æ¡£åŒæ­¥'
            ]
        }
    
    def generate(self, task: Task) -> List[Subtask]:
        """æ ¹æ®ä»»åŠ¡ç±»å‹ç”Ÿæˆå­ä»»åŠ¡"""
        
        task_type = self.classify_task(task.title)
        template = self.templates.get(task_type, self.default_template())
        
        subtasks = []
        for item in template:
            subtasks.append(Subtask(
                title=item,
                status='pending',
                parent_task=task.id,
                estimated_time=self.estimate_time(item)
            ))
        
        return subtasks
```

#### 3.2.3 ä»£ç ç”Ÿæˆå™¨ (ä½¿ç”¨GLM-5 Coding Plan)

```python
class CodeGenerator:
    """ä»£ç ç”Ÿæˆå™¨ï¼Œè°ƒç”¨GLM-5è¿›è¡Œè‡ªåŠ¨ç¼–ç """
    
    def __init__(self):
        self.model = "google-antigravity/gemini-2.5-pro-thinking"
        self.fallback_model = "zhipu/glm-4.7"
    
    def generate(self, subtask: Subtask, context: Dict) -> CodeResult:
        """ç”Ÿæˆä»£ç å®ç°"""
        
        prompt = self.build_prompt(subtask, context)
        
        try:
            # å°è¯•ä½¿ç”¨GLM-5è¿›è¡Œç¼–ç 
            result = self.call_llm(
                model=self.model,
                prompt=prompt,
                mode="coding_plan"  # å¯ç”¨Coding Planæ¨¡å¼
            )
            
            if result.success:
                return result
        
        except Exception as e:
            self.log_error(f"GLM-5ç¼–ç å¤±è´¥: {e}")
        
        # é™çº§åˆ°GLM-4.7
        return self.call_llm(
            model=self.fallback_model,
            prompt=prompt,
            mode="standard"
        )
    
    def build_prompt(self, subtask: Subtask, context: Dict) -> str:
        """æ„å»ºç¼–ç æç¤ºè¯"""
        
        return f"""
# ä»»åŠ¡ä¸Šä¸‹æ–‡
é¡¹ç›®: {context['project_name']}
ç›¸å…³æ–‡ä»¶: {context['related_files']}
æŠ€æœ¯æ ˆ: {context['tech_stack']}

# å­ä»»åŠ¡
{subtask.title}

# è¦æ±‚
1. éµå¾ªé¡¹ç›®ç°æœ‰ä»£ç é£æ ¼
2. æ·»åŠ å¿…è¦çš„æ³¨é‡Šå’Œæ–‡æ¡£
3. è€ƒè™‘è¾¹ç•Œæ¡ä»¶å’Œé”™è¯¯å¤„ç†
4. åŒ…å«å•å…ƒæµ‹è¯•

# è¯·ç”Ÿæˆå®Œæ•´çš„ä»£ç å®ç°
"""
```

#### 3.2.4 æµ‹è¯•éªŒè¯å™¨

```python
class TestValidator:
    """æµ‹è¯•éªŒè¯å™¨"""
    
    def __init__(self):
        self.test_types = [
            'syntax_check',      # è¯­æ³•æ£€æŸ¥
            'unit_test',          # å•å…ƒæµ‹è¯•
            'integration_test',   # é›†æˆæµ‹è¯•
            'code_review',        # ä»£ç å®¡æŸ¥
            'security_check'      # å®‰å…¨æ£€æŸ¥
        ]
    
    def validate(self, code_result: CodeResult) -> ValidationResult:
        """å¤šç»´åº¦éªŒè¯ç”Ÿæˆçš„ä»£ç """
        
        results = {}
        
        # 1. è¯­æ³•æ£€æŸ¥
        results['syntax'] = self.syntax_check(code_result.code)
        
        # 2. å•å…ƒæµ‹è¯•
        if code_result.tests:
            results['unit'] = self.run_tests(code_result.tests)
        
        # 3. ä»£ç å®¡æŸ¥ï¼ˆä½¿ç”¨LLMï¼‰
        results['review'] = self.llm_review(code_result.code)
        
        # 4. å®‰å…¨æ£€æŸ¥
        results['security'] = self.security_scan(code_result.code)
        
        # ç»¼åˆè¯„åˆ†
        score = self.calc_score(results)
        
        return ValidationResult(
            score=score,
            details=results,
            passed=score >= 0.7
        )
```

---

### 3.3 ä»»åŠ¡è°ƒåº¦å™¨ (Task Scheduler)

#### 3.3.1 è°ƒåº¦ç­–ç•¥

```python
class TaskScheduler:
    """ä»»åŠ¡è°ƒåº¦å™¨ï¼Œæ”¯æŒäº‹ä»¶é©±åŠ¨å’Œå®šæ—¶è§¦å‘"""
    
    def __init__(self):
        self.task_queue = PriorityQueue()
        self.event_listeners = {}
    
    def schedule(self):
        """ä¸»è°ƒåº¦å¾ªç¯"""
        
        while True:
            # 1. æ£€æŸ¥äº‹ä»¶é©±åŠ¨ä»»åŠ¡
            self.handle_events()
            
            # 2. æ£€æŸ¥å®šæ—¶ä»»åŠ¡
            self.handle_scheduled()
            
            # 3. å¤„ç†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡
            if not self.task_queue.empty():
                task = self.task_queue.get()
                self.execute_task(task)
            
            # 4. çŸ­æš‚ä¼‘çœ 
            time.sleep(1)
    
    def execute_task(self, task: Task):
        """æ‰§è¡Œä»»åŠ¡ï¼ˆæ”¯æŒå¹¶å‘ï¼‰"""
        
        if task.type == 'healing':
            self.healing_engine.handle(task)
        elif task.type == 'coding':
            self.coding_module.handle(task)
        elif task.type == 'maintenance':
            self.maintenance_handler.handle(task)
```

---

### 3.4 çŸ¥è¯†åº“è®¾è®¡

#### 3.4.1 æ•…éšœæ¨¡å¼åº“

```json
{
  "patterns": [
    {
      "id": "webdav_mount_failure",
      "symptoms": [
        "webdav.mount_status != 'mounted'",
        "webdav.read_write_test.failed"
      ],
      "root_causes": [
        "network_issue",
        "credential_expired",
        "davfs2_crashed",
        "config_error"
      ],
      "fix_strategies": [
        {
          "order": 1,
          "type": "remount",
          "command": "mount -a",
          "verify": "test -w /home/ubuntu/123pan/test.txt"
        },
        {
          "order": 2,
          "type": "restart_service",
          "command": "systemctl restart davfs2",
          "verify": "systemctl status davfs2"
        }
      ]
    }
  ]
}
```

#### 3.4.2 ä¿®å¤æ–¹æ¡ˆåº“

```json
{
  "fix_strategies": {
    "gateway_restart": {
      "prerequisite": "gateway_process_exists",
      "steps": [
        {"cmd": "openclaw gateway stop", "timeout": 30},
        {"wait": 5},
        {"cmd": "openclaw gateway start", "timeout": 60},
        {"wait": 10},
        {"verify": "openclaw gateway status"}
      ],
      "rollback": "openclaw gateway restart"
    },
    "api_auth_refresh": {
      "prerequisite": "provider_configured",
      "steps": [
        {"cmd": "openclaw models refresh {{provider}}"},
        {"wait": 3},
        {"verify": "openclaw models status --json"}
      ]
    }
  }
}
```

---

## 4. å®æ–½è®¡åˆ’

### 4.1 é˜¶æ®µåˆ’åˆ†

| é˜¶æ®µ | æ—¶é—´ | äº¤ä»˜ç‰© | ä¼˜å…ˆçº§ |
|-----|------|--------|--------|
| **é˜¶æ®µ1**: åŸºç¡€å¢å¼º | 2å¤© | å¢å¼ºç‰ˆ `auto_maintain.sh` | P0 |
| **é˜¶æ®µ2**: è‡ªæ„ˆå¼•æ“ | 3å¤© | `self_healing.py` + çŸ¥è¯†åº“ | P0 |
| **é˜¶æ®µ3**: è‡ªä¸»ç¼–ç  | 4å¤© | `autonomous_coding.py` | P1 |
| **é˜¶æ®µ4**: æ§åˆ¶å™¨é›†æˆ | 2å¤© | `autonomous_controller.py` | P0 |
| **é˜¶æ®µ5**: æµ‹è¯•ä¸ä¼˜åŒ– | 2å¤© | æµ‹è¯•æŠ¥å‘Š + æ–‡æ¡£ | P1 |

### 4.2 é˜¶æ®µ1: åŸºç¡€å¢å¼º (ç«‹å³å¼€å§‹)

**ç›®æ ‡**: æ”¹è¿›ç°æœ‰ `auto_maintain.sh`

**æ”¹è¿›ç‚¹**:
1. âœ… å¢åŠ æ›´å¤šå¥åº·æ£€æŸ¥ï¼ˆWebDAVã€VNCã€å®å¡”ï¼‰
2. âœ… å®ç°æ¸è¿›å¼ä¿®å¤ï¼ˆè€Œéç®€å•é‡å¯ï¼‰
3. âœ… å¢åŠ äº‹ä»¶é©±åŠ¨èƒ½åŠ›ï¼ˆç›‘å¬æ—¥å¿—å˜åŒ–ï¼‰
4. âœ… ä¼˜åŒ–æ—¥å¿—å’Œå‘Šè­¦

**ä»£ç ç»“æ„**:
```bash
scripts/
â”œâ”€â”€ auto_maintain_v2.sh          # å¢å¼ºç‰ˆç»´æŠ¤è„šæœ¬
â”œâ”€â”€ modules/
â”‚   â”œâ”€â”€ health_checks.sh         # å¥åº·æ£€æŸ¥å‡½æ•°åº“
â”‚   â”œâ”€â”€ fix_strategies.sh        # ä¿®å¤ç­–ç•¥å‡½æ•°åº“
â”‚   â””â”€â”€ event_listener.sh        # äº‹ä»¶ç›‘å¬å™¨
â””â”€â”€ config/
    â””â”€â”€ maintenance_config.json  # é…ç½®æ–‡ä»¶
```

### 4.3 é˜¶æ®µ2: è‡ªæ„ˆå¼•æ“

**æ–‡ä»¶ç»“æ„**:
```python
self_healing/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ detector.py                  # æ•…éšœæ£€æµ‹å™¨
â”œâ”€â”€ analyzer.py                  # è¯Šæ–­åˆ†æå™¨
â”œâ”€â”€ fixer.py                     # ä¿®å¤æ‰§è¡Œå™¨
â”œâ”€â”€ validator.py                 # éªŒè¯å™¨
â”œâ”€â”€ knowledge_base/
â”‚   â”œâ”€â”€ patterns.json            # æ•…éšœæ¨¡å¼
â”‚   â”œâ”€â”€ strategies.json          # ä¿®å¤ç­–ç•¥
â”‚   â””â”€â”€ history.json             # å†å²è®°å½•
â””â”€â”€ config.yaml                  # é…ç½®æ–‡ä»¶
```

### 4.4 é˜¶æ®µ3: è‡ªä¸»ç¼–ç 

**æ–‡ä»¶ç»“æ„**:
```python
autonomous_coding/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ todo_parser.py               # TODOè§£æå™¨
â”œâ”€â”€ subtask_generator.py         # å­ä»»åŠ¡ç”Ÿæˆå™¨
â”œâ”€â”€ code_generator.py            # ä»£ç ç”Ÿæˆå™¨
â”œâ”€â”€ test_validator.py            # æµ‹è¯•éªŒè¯å™¨
â”œâ”€â”€ code_reviewer.py             # ä»£ç å®¡æŸ¥å™¨
â””â”€â”€ templates/
    â”œâ”€â”€ python_template.py       # Pythonæ¨¡æ¿
    â”œâ”€â”€ bash_template.sh         # Bashæ¨¡æ¿
    â””â”€â”€ markdown_template.md     # Markdownæ¨¡æ¿
```

### 4.5 é˜¶æ®µ4: æ§åˆ¶å™¨é›†æˆ

**ä¸»æ§åˆ¶å™¨**:
```python
autonomous_controller.py
â”œâ”€â”€ config/                      # é…ç½®ç›®å½•
â”œâ”€â”€ modules/                     # æ¨¡å—ç›®å½•
â”œâ”€â”€ logs/                        # æ—¥å¿—ç›®å½•
â”œâ”€â”€ state/                       # çŠ¶æ€ç›®å½•
â””â”€â”€ README.md                    # æ–‡æ¡£
```

**åŠŸèƒ½**:
1. ç»Ÿä¸€ä»»åŠ¡è°ƒåº¦
2. æ¨¡å—åè°ƒ
3. çŠ¶æ€ç®¡ç†
4. æ—¥å¿—è®°å½•
5. å‘Šè­¦é€šçŸ¥

---

## 5. GitHubä»“åº“æ–¹æ¡ˆ

### 5.1 ä»“åº“ç»“æ„

**æ–¹æ¡ˆA: å•ä»“åº“ï¼ˆæ¨èï¼‰**
```
jarvis-scripts/
â”œâ”€â”€ autonomous_system/           # è‡ªä¸»ç¼–ç¨‹ç³»ç»Ÿ
â”‚   â”œâ”€â”€ core/                   # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ modules/                # åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â””â”€â”€ tests/                  # æµ‹è¯•
â”œâ”€â”€ legacy_scripts/              # æ—§è„šæœ¬ï¼ˆä¿ç•™ï¼‰
â””â”€â”€ README.md
```

**æ–¹æ¡ˆB: ç‹¬ç«‹ä»“åº“**
```
autonomous-programming-system/
â”œâ”€â”€ src/                        # æºä»£ç 
â”œâ”€â”€ tests/                      # æµ‹è¯•
â”œâ”€â”€ docs/                       # æ–‡æ¡£
â”œâ”€â”€ examples/                   # ç¤ºä¾‹
â””â”€â”€ README.md
```

**å»ºè®®**: å…ˆä½¿ç”¨æ–¹æ¡ˆAï¼Œå¦‚æœç³»ç»Ÿè¶³å¤Ÿç‹¬ç«‹å†è¿ç§»åˆ°æ–¹æ¡ˆB

### 5.2 æäº¤ç­–ç•¥

```bash
# è‡ªåŠ¨æäº¤æ ¼å¼
git commit -m "[auto] healing: fixed WebDAV mount issue"

# äººå·¥æäº¤æ ¼å¼
git commit -m "feat: add new monitoring check"

# ç´§æ€¥ä¿®å¤æ ¼å¼
git commit -m "[urgent] fix: Gateway restart failure"
```

---

## 6. ç›‘æ§ä¸å‘Šè­¦

### 6.1 å‘Šè­¦çº§åˆ«

| çº§åˆ« | ç¬¦å· | è§¦å‘æ¡ä»¶ | é€šçŸ¥æ–¹å¼ |
|-----|------|---------|---------|
| ğŸ”´ ä¸¥é‡ | CRITICAL | Gatewayå´©æºƒã€æ‰€æœ‰APIå¤±æ•ˆ | é£ä¹¦æ¶ˆæ¯ + é‚®ä»¶ |
| ğŸŸ  è­¦å‘Š | WARNING | WebDAVæ•…éšœã€ç£ç›˜>85% | é£ä¹¦æ¶ˆæ¯ |
| ğŸŸ¡ æç¤º | INFO | Gitæ¨é€å¤±è´¥ã€é¢åº¦<20% | ä»…æ—¥å¿— |
| ğŸŸ¢ æ­£å¸¸ | OK | æ‰€æœ‰æ£€æŸ¥é€šè¿‡ | - |

### 6.2 å‘Šè­¦è§„åˆ™

```yaml
alerts:
  - name: "GatewayæœåŠ¡å¼‚å¸¸"
    condition: "gateway.status != 'running'"
    level: "critical"
    actions:
      - type: "restart_gateway"
      - type: "notify"
        channel: "feishu"
        message: "ğŸ”´ GatewayæœåŠ¡å¼‚å¸¸ï¼Œå·²å°è¯•è‡ªåŠ¨ä¿®å¤"
    
  - name: "WebDAVæŒ‚è½½å¤±è´¥"
    condition: "webdav.mounted == false"
    level: "warning"
    actions:
      - type: "remount_webdav"
      - type: "notify"
        channel: "feishu"
        delay: 300  # 5åˆ†é’Ÿåå‘Šè­¦ï¼ˆç»™ä¿®å¤æ—¶é—´ï¼‰
```

---

## 7. æŠ€æœ¯é€‰å‹

### 7.1 å¼€å‘è¯­è¨€
- **Python 3.10+**: ä¸»è¦é€»è¾‘ï¼ˆä¸°å¯Œçš„åº“ï¼Œæ˜“ç»´æŠ¤ï¼‰
- **Bash**: ç³»ç»Ÿæ“ä½œå’Œå¿«é€Ÿè„šæœ¬

### 7.2 æ ¸å¿ƒä¾èµ–

```python
# requirements.txt
pyyaml>=6.0          # é…ç½®æ–‡ä»¶è§£æ
requests>=2.31.0     # HTTPè¯·æ±‚
croniter>=2.0.0      # Cronè¡¨è¾¾å¼è§£æ
psutil>=5.9.0        # ç³»ç»Ÿç›‘æ§
openai>=1.0.0        # LLM APIè°ƒç”¨
gitpython>=3.1.0     # Gitæ“ä½œ
rich>=13.0.0         # ç»ˆç«¯è¾“å‡ºç¾åŒ–
```

### 7.3 é…ç½®ç®¡ç†
- **YAML**: ä¸»é…ç½®æ–‡ä»¶
- **JSON**: çŸ¥è¯†åº“ã€çŠ¶æ€æ–‡ä»¶
- **INI**: éƒ¨åˆ†å·¥å…·é…ç½®

---

## 8. é£é™©ä¸åº”å¯¹

### 8.1 æŠ€æœ¯é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | åº”å¯¹æªæ–½ |
|-----|------|------|---------|
| LLMç”Ÿæˆä»£ç è´¨é‡ä¸ç¨³å®š | ä¸­ | é«˜ | å¤šè½®æµ‹è¯•éªŒè¯ + äººå·¥å®¡æ ¸å…³é”®ä»£ç  |
| ä¿®å¤ç­–ç•¥å¤±è´¥å¯¼è‡´ç³»ç»Ÿä¸å¯ç”¨ | ä½ | é«˜ | æ‰€æœ‰ä¿®å¤å‰å¤‡ä»½ + å›æ»šæœºåˆ¶ |
| ä»»åŠ¡è°ƒåº¦æ­»é” | ä½ | ä¸­ | è¶…æ—¶æœºåˆ¶ + çœ‹é—¨ç‹— |
| GitHubåŒæ­¥å†²çª | ä¸­ | ä½ | è‡ªåŠ¨åˆå¹¶ç­–ç•¥ + å†²çªå‘Šè­¦ |

### 8.2 å®‰å…¨é£é™©

| é£é™© | åº”å¯¹æªæ–½ |
|-----|---------|
| å‡­è¯æ³„éœ² | ä½¿ç”¨ç¯å¢ƒå˜é‡ + åŠ å¯†å­˜å‚¨ |
| ä»£ç æ³¨å…¥ | ä¸¥æ ¼è¾“å…¥éªŒè¯ + æ²™ç®±æ‰§è¡Œ |
| æœªæˆæƒè®¿é—® | æ–‡ä»¶æƒé™æ§åˆ¶ + æ—¥å¿—å®¡è®¡ |

---

## 9. æˆåŠŸæŒ‡æ ‡

### 9.1 å®šé‡æŒ‡æ ‡
- âœ… **è‡ªæ„ˆæˆåŠŸç‡**: > 85%ï¼ˆæ— éœ€äººå·¥å¹²é¢„çš„é—®é¢˜ï¼‰
- âœ… **ä»£ç ç”Ÿæˆå¯ç”¨ç‡**: > 70%ï¼ˆç”Ÿæˆçš„ä»£ç å¯ç›´æ¥ä½¿ç”¨ï¼‰
- âœ… **å¹³å‡æ•…éšœæ¢å¤æ—¶é—´**: < 5åˆ†é’Ÿ
- âœ… **å‡é˜³æ€§ç‡**: < 10%ï¼ˆè¯¯æŠ¥ç‡ï¼‰

### 9.2 å®šæ€§æŒ‡æ ‡
- âœ… ç»´æŠ¤å·¥ä½œé‡å‡å°‘50%+
- âœ… ç³»ç»Ÿç¨³å®šæ€§æå‡
- âœ… å¼€å‘æ•ˆç‡æå‡

---

## 10. ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹ (ä»Šå¤©)
1. âœ… åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
2. âœ… å®ç°å¢å¼ºç‰ˆ `auto_maintain_v2.sh`
3. âœ… æ·»åŠ WebDAVã€VNCå¥åº·æ£€æŸ¥
4. âœ… å®ç°æ¸è¿›å¼ä¿®å¤é€»è¾‘

### æœ¬å‘¨å®Œæˆ
1. â³ å®Œæˆè‡ªæ„ˆå¼•æ“æ¡†æ¶
2. â³ å»ºç«‹æ•…éšœæ¨¡å¼åº“
3. â³ å®ç°åŸºç¡€çš„è‡ªä¸»ç¼–ç æ¨¡å—
4. â³ ç¼–å†™å•å…ƒæµ‹è¯•

### ä¸‹å‘¨ç›®æ ‡
1. â³ é›†æˆæ‰€æœ‰æ¨¡å—åˆ°æ§åˆ¶å™¨
2. â³ è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•
3. â³ ä¼˜åŒ–å’Œæ–‡æ¡£å®Œå–„
4. â³ GitHubä»“åº“åŒæ­¥

---

## é™„å½•

### A. å‚è€ƒèµ„æº
- [GLM-5 Coding Planæ–‡æ¡£](https://docs.example.com/glm5-coding)
- [OpenClaw APIæ–‡æ¡£](https://docs.openclaw.ai)
- [è‡ªæ„ˆç³»ç»Ÿæœ€ä½³å®è·µ](https://sre.google/sre-book/monitoring-distributed-systems/)

### B. ç‰ˆæœ¬å†å²
- v1.0 (2026-02-13): åˆå§‹è®¾è®¡

### C. è”ç³»æ–¹å¼
- **è´Ÿè´£äºº**: GLM-4.7 (è´¾ç»´æ–¯)
- **é¡¹ç›®ä½ç½®**: `PARA/Projects/è‡ªä¸»ç¼–ç¨‹é¡¹ç›®-ç¬¬äºŒè½®/`

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®Œæˆ
**ä¸‹ä¸€æ­¥**: å¼€å§‹å®æ–½é˜¶æ®µ1 - åŸºç¡€å¢å¼º
