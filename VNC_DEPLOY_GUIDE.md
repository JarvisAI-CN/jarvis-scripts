# 保质期管理系统 - VNC部署完整指南 ⚡

**准备时间**: 2分钟
**部署时间**: 3分钟
**总耗时**: 5分钟

---

## 🖥️ 第一步：连接VNC

### 方法1：通过浏览器（推荐）
```
打开浏览器访问：http://82.157.20.7:6080/vnc.html
密码：见 PASSWORDS.md (Fs159753. 或 Fs123456.)
```

### 方法2：通过VNC客户端
```
地址: 82.157.20.7:5901
密码: 同上
```

---

## 🚀 第二步：打开宝塔面板

1. **在VNC桌面中，打开Firefox浏览器**
   - 点击左上角Activities → 搜索Firefox
   - 或按 `Alt+F2` 输入 `firefox`

2. **访问宝塔面板**
   ```
   http://82.157.20.7:8888/fs123456
   ```

3. **登录**
   ```
   用户名: fs123
   密码: fs123456
   ```

---

## 📊 第三步：创建数据库（1分钟）

1. **点击左侧菜单 "数据库"**

2. **点击 "添加数据库"**

3. **填写信息**:
   ```
   数据库名: expiry_system
   用户名: expiry_user
   密码: Expiry@2026System!
   访问权限: 本地服务器 (127.0.0.1)
   ```

4. **点击 "提交"**

5. **导入SQL文件**:
   - 点击刚创建的数据库名 `expiry_system`
   - 点击 "导入" 标签
   - 点击 "从本地上传"
   - **文件路径**:
     ```
     /home/ubuntu/.openclaw/workspace/PARA/Projects/保质期管理系统/deploy_package/database.sql
     ```
   - 点击 "导入"

---

## 📤 第四步：上传网站文件（1分钟）

1. **点击左侧菜单 "网站"**

2. **找到 "ceshi.dhmip.cn"**

3. **点击 "根目录" 按钮**

4. **删除默认文件**:
   - 找到 `index.html`
   - 右键 → 删除

5. **上传PHP文件**:
   - 点击 "上传" 按钮
   - **上传这两个文件**:
     ```
     /home/ubuntu/.openclaw/workspace/PARA/Projects/保质期管理系统/deploy_package/index.php
     /home/ubuntu/.openclaw/workspace/PARA/Projects/保质期管理系统/deploy_package/db.php
     ```

6. **确认上传成功**:
   - 文件列表中应该有:
     - index.php (44KB)
     - db.php (2.5KB)

---

## 🧪 第五步：测试访问（30秒）

### 1. 在Firefox中访问
```
http://ceshi.dhmip.cn
```

### 2. 应该看到
- ✅ 保质期管理系统界面
- ✅ 扫码按钮
- ✅ 商品列表

### 3. 测试功能
- **手动输入SKU**: `6901234567890`
- **应该显示**: 可口可乐 500ml
- **查看批次**: 应该有2个批次（2026-12-31, 2027-06-30）

---

## 🎯 快速检查清单

部署完成后检查：
- [ ] 数据库 `expiry_system` 已创建
- [ ] SQL文件已导入（2张表：products, batches）
- [ ] 网站根目录只有 index.php 和 db.php
- [ ] 访问 http://ceshi.dhmip.cn 正常显示
- [ ] 测试SKU能查询到商品

---

## ⚠️ 常见问题

### Q1: 找不到文件？
**解决**:
```bash
# 在VNC终端中执行
ls -lh /home/ubuntu/.openclaw/workspace/PARA/Projects/保质期管理系统/deploy_package/
```

### Q2: 数据库导入失败？
**解决**: 检查SQL文件是否完整（2722字节）

### Q3: 页面显示错误？
**解决**:
1. 检查PHP版本（应该是8.x）
2. 查看网站错误日志：网站 → ceshi.dhmip.cn → 日志

### Q4: 扫码无法启动？
**原因**: HTTP环境限制摄像头访问
**解决**: 申请SSL证书（网站 → SSL → Let's Encrypt）

---

## 📱 移动端测试（可选）

如需手机扫码，需要配置HTTPS：

1. **申请SSL证书**
   - 网站 → ceshi.dhmip.cn → SSL
   - 选择 Let's Encrypt
   - 点击申请

2. **HTTPS访问**
   ```
   https://ceshi.dhmip.cn
   ```

3. **手机测试**
   - 用手机浏览器访问HTTPS地址
   - 点击扫码按钮
   - 允许摄像头权限
   - 扫描条形码测试

---

## ✅ 部署完成后

### 测试数据
```
SKU: 6901234567890 → 可口可乐 500ml
  批次1: 2026-12-31 (100瓶)
  批次2: 2027-06-30 (50瓶)

SKU: 6901234567891 → 康师傅红烧牛肉面
  批次1: 2026-03-15 (200包)
```

### 功能演示
1. ✅ 查询商品
2. ✅ 添加批次
3. ✅ 删除批次
4. ✅ 到期提醒

---

**需要贾维斯协助？随时告诉我当前步骤！** ⚡
